<h1 class="inline">Lendings</h1><span class="spacer"> </span>

<form class="inline search-input">
    <mat-form-field>
        <input matInput value="" [(ngModel)]="filter" name="filter">
        <span matSuffix><mat-icon>search</mat-icon></span>
    </mat-form-field>
</form>

<mat-divider></mat-divider>




<mat-tab-group >
    <mat-tab *ngFor="let lendings of lendingsSet" label="Tab 1">
      <mat-list>
        <mat-list-item *ngFor="let lending of lendings | async | requestSearch:filter;" (click)="openLendDetailDialog(lending)" class="list-item stated-list-item">


            <h4 matLine>{{lending.device.name}}</h4>
            <p matLine>
                <span class="lineItem"><b>Start date:</b> {{lending.lend.start_date.toLocaleDateString()}}</span>
                <span class="lineItem"><b>End date:</b> {{lending.lend.end_date.toLocaleDateString()}}</span>
                <span class="lineItem"><b>Number of devices:</b> {{lending.lend.device_quantity}}</span>
                <span class="lineItem" *ngIf="this.auth.accessFeature(this.auth.admini)"><b>Borrower:</b> {{lending.user.name}}</span>
            </p>
            <button mat-raised-button color="accent" (click)="openLendDetailDialog(lending)">Details</button>
            <button mat-raised-button color="accent" (click)="openLendReturnDialog(lending)">Return</button>


          <!--<button mat-raised-button color="accent" (click)="returnItem()">Return</button>-->


          <mat-icon color="primary" *ngIf="(lending.state==1)" class="state-icon">schedule</mat-icon>
          <mat-icon color="warn" *ngIf="(lending.state==2)" class="state-icon">error</mat-icon>

        </mat-list-item>
      </mat-list>
    </mat-tab>
</mat-tab-group>

<!-- .toLocaleDateString()
<mat-list>
  <mat-list-item *ngFor="let user of users; let i = index">
    <mat-icon matListIcon>account_box</mat-icon>
    <h4 matLine>{{user.name}} {{user.key}}</h4>
    <p matLine class="demo-2"> {{user.email_address}} {{user.present_lendings}}</p>

  </mat-list-item>
</mat-list>-->